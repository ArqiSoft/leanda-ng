# Leanda Event Contracts Index
#
# This file is an INDEX to event specifications. It does not define events itself.
#
# Canonical domain events (users, folders, files, records, ML, exports, processing,
# notifications) are defined in:
#   ../specs/events/domain-events.yaml
# Use that file as the source of truth for domain event payloads and channels.
#
# Service-specific commands and events (blob, imaging, parsers, office-processor,
# indexing, sagas) are defined in the files listed below.

overview: |
  Domain events are specified in shared/specs/events/domain-events.yaml (AsyncAPI 2.6).
  Service-specific contracts define commands and events per microservice.
  All event streaming uses Kafka (Redpanda in local development).

canonicalDomainEvents: ../specs/events/domain-events.yaml

serviceContracts:
  - file: events/blob-events.yaml
    description: Blob storage; BlobLoaded event when files are uploaded
    topics: [blob-loaded-events]
  - file: events/imaging-events.yaml
    description: Imaging service; GenerateImage command, ImageGenerated/ImageGenerationFailed events
    topics: [imaging-commands, imaging-events]
  - file: events/office-processor-events.yaml
    description: Office processor; ConvertToPdf, ExtractMeta commands and result events
    topics: [office-convert-commands, office-convert-events, office-extract-meta-commands, office-extract-meta-events]
  - file: events/indexing-events.yaml
    description: Indexing service; file/folder/record persisted and entity indexed events
    topics: [file-events, indexing-events]
  - file: events/metadata-events.yaml
    description: Metadata processing; generate metadata command and events
    topics: [metadata-commands, metadata-events]
  - file: events/chemical-parser-events.yaml
    description: Chemical file parser; parse commands and file/record parsed events
    topics: [chemical-parse-commands, chemical-parser-events]
  - file: events/chemical-properties-events.yaml
    description: Chemical properties; calculate command and result events
    topics: [chemical-properties-commands, chemical-properties-events]
  - file: events/reaction-parser-events.yaml
    description: Reaction file parser; parse commands and events
    topics: [reaction-parse-commands, reaction-parser-events]
  - file: events/crystal-parser-events.yaml
    description: Crystal parser; parse commands and events
    topics: [crystal-parse-commands, crystal-parser-events]
  - file: events/spectra-parser-events.yaml
    description: Spectra parser; parse commands and events
    topics: [spectra-parse-commands, spectra-parser-events]
  - file: events/file-processing-saga.yaml
    description: File processing saga; started, completed, failed, compensated
    topics: [file-processing-saga]
  - file: events/record-processing-saga.yaml
    description: Record processing saga events
    topics: [record-processing-saga]
  - file: events/ml-training-saga.yaml
    description: ML training saga events
    topics: [ml-training-saga]
